<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EduAid - Student Dashboard</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Source+Sans+Pro:wght@400;600&display=swap" rel="stylesheet">
  <style>
    .layout { display: grid; grid-template-columns: 220px 1fr; min-height: 100vh; }
    .sidebar { background: #fff; border-right: 1px solid var(--border-color); padding: 24px 16px; }
    .sidebar h2 { font-size: 1.2rem; margin: 0 0 20px; color: var(--royal-blue); }
    .menu { list-style: none; padding: 0; margin: 0; }
    .menu li { margin-bottom: 10px; }
    .menu a { display: block; padding: 10px 12px; border-radius: 6px; text-decoration: none; color: var(--royal-blue); font-weight: 600; }
    .menu a.active, .menu a:hover { background: #f4f6fb; color: var(--gold-accent); }

    .main { padding: 24px; }
    .topbar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
    .muted { color: var(--text-light); font-size: 0.95rem; }

    .cards { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 20px; }
    .card { background: #fff; border: 1px solid var(--border-color); border-radius: 8px; padding: 16px; }
    .card h4 { margin: 0 0 10px; color: var(--text-light); font-weight: 600; }
    .stat { font-size: 1.4rem; font-weight: 700; color: var(--royal-blue); }
    .sub { font-size: 0.9rem; color: var(--text-light); margin-top: 6px; }

    .grid { display: grid; grid-template-columns: 1.2fr 1fr 1fr; gap: 20px; }
    .panel { background: #fff; border: 1px solid var(--border-color); border-radius: 8px; padding: 16px; }
    .panel h3 { margin: 0 0 12px; font-size: 1.2rem; }
    table { width: 100%; border-collapse: collapse; }
    th, td { text-align: left; padding: 10px 8px; border-bottom: 1px solid #eee; font-size: 0.95rem; }
    th { color: var(--text-light); font-weight: 700; }
    .ngo { display: flex; justify-content: space-between; align-items: center; padding: 12px; border: 1px solid var(--border-color); border-radius: 6px; margin-bottom: 10px; }
    .badge { background: #eaf2ff; color: var(--royal-blue); font-weight: 700; padding: 2px 8px; border-radius: 999px; font-size: 0.8rem; }
    .btn-sm { padding: 6px 10px; border-radius: 5px; border: 1px solid var(--gold-accent); background: var(--gold-accent); color: #fff; font-weight: 700; cursor: pointer; }
    .btn-sm:hover { background: var(--gold-accent-hover); border-color: var(--gold-accent-hover); }
  </style>
</head>
<body>
  <div class="layout">
    <aside class="sidebar">
      <h2>EduAid</h2>
      <ul class="menu">
        <li><a href="#" class="active">Dashboard</a></li>
        <li><a href="#">My Performance</a></li>
        <li><a href="#">Attendance</a></li>
        <li><a href="#">NGO Help</a></li>
      </ul>
      <div class="muted" style="position:absolute; bottom:24px;">Welcome, {{ student_name or 'Student' }}</div>
    </aside>

    <main class="main">
      <div class="topbar">
        <div>
          <h2 style="margin:0;">Welcome to your Student Portal</h2>
          <div class="muted">Track your progress, attendance, and get help when you need it!</div>
        </div>
        <div class="muted">ID: {{ student_id }}</div>
      </div>

      <section class="cards">
        <div class="card">
          <h4>GPA</h4>
          <div class="stat">{{ '%.1f' % gpa }} / 10</div>
          <div class="sub">Last semester: {{ last_gpa }}</div>
        </div>
        <div class="card">
          <h4>Attendance</h4>
          <div class="stat">{{ attendance_percent }}%</div>
          <div class="sub">Absences: {{ absences }}</div>
        </div>
        <div class="card">
          <h4>Next Exam</h4>
          <div class="stat"><a href="#" style="text-decoration:none; color:var(--royal-blue);">{{ next_exam_subject }}</a></div>
          <div class="sub">Date: {{ next_exam_date }}</div>
        </div>
        <div class="card">
          <h4>NGO Help</h4>
          <div class="stat">{{ ngo_available }} Available</div>
          <div class="sub"><button class="btn-sm">View Options</button></div>
        </div>
      </section>

      <section class="grid">
        <div class="panel">
          <h3>Academic Performance</h3>
          <table>
            <thead>
              <tr><th>Subject</th><th>Grade</th><th>Teacher Feedback</th></tr>
            </thead>
            <tbody>
            {% for row in performance_rows %}
              <tr>
                <td>{{ row.subject }}</td>
                <td>{{ row.grade }}</td>
                <td>{{ row.feedback }}</td>
              </tr>
            {% endfor %}
            </tbody>
          </table>
        </div>

        <div class="panel">
          <h3>Attendance Record</h3>
          <table>
            <thead>
              <tr><th>Month</th><th>Present</th><th>Absent</th><th>Leave</th></tr>
            </thead>
            <tbody>
            {% for row in attendance_rows %}
              <tr>
                <td>{{ row.month }}</td>
                <td>{{ row.present }}</td>
                <td>{{ row.absent }}</td>
                <td>{{ row.leave }}</td>
              </tr>
            {% endfor %}
            </tbody>
          </table>
        </div>

        <div class="panel">
          <h3>NGO Help Options</h3>
          {% for n in ngos %}
            <div class="ngo">
              <div>
                <div style="font-weight:700;">{{ n.name }}</div>
                <div class="muted">{{ n.desc }}</div>
              </div>
              <button class="btn-sm">{{ n.cta }}</button>
            </div>
          {% endfor %}
        </div>
      </section>
    </main>
  </div>
</body>
</html>



